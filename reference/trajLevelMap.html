<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function plots back trajectories on a leaflet map. This function
requires that data are imported using the openair::importTraj() function."><title>Trajectory level plots in leaflet — trajLevelMap • openairmaps</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Trajectory level plots in leaflet — trajLevelMap"><meta property="og:description" content="This function plots back trajectories on a leaflet map. This function
requires that data are imported using the openair::importTraj() function."><meta property="og:image" content="https://davidcarslaw.github.io/openairmaps/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">openairmaps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0.9004</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://bookdown.org/david_carslaw/openair/maps-overview.html">Book (External)</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Trajectory level plots in leaflet</h1>
      
      <div class="d-none name"><code>trajLevelMap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function plots back trajectories on a <code>leaflet</code> map. This function
requires that data are imported using the <code><a href="https://davidcarslaw.github.io/openair/reference/importTraj.html" class="external-link">openair::importTraj()</a></code> function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">trajLevelMap</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  longitude <span class="op">=</span> <span class="st">"lon"</span>,</span>
<span>  latitude <span class="op">=</span> <span class="st">"lat"</span>,</span>
<span>  <span class="va">pollutant</span>,</span>
<span>  control <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  statistic <span class="op">=</span> <span class="st">"frequency"</span>,</span>
<span>  percentile <span class="op">=</span> <span class="fl">90</span>,</span>
<span>  lon.inc <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  lat.inc <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  min.bin <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  cols <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  tile.border <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"OpenStreetMap"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>Data frame, the result of importing a trajectory file using
<code><a href="https://davidcarslaw.github.io/openair/reference/importTraj.html" class="external-link">openair::importTraj()</a></code>.</p></dd>


<dt>latitude, longitude</dt>
<dd><p>The decimal latitude/longitude.</p></dd>


<dt>pollutant</dt>
<dd><p>Pollutant to be plotted. By default the trajectory height is
used.</p></dd>


<dt>control</dt>
<dd><p>Used for splitting the trajectories into different groups
which can be selected between using a "layer control" menu. Passed to
<code><a href="https://davidcarslaw.github.io/openair/reference/cutData.html" class="external-link">openair::cutData()</a></code>.</p></dd>


<dt>statistic</dt>
<dd><p>For <code>trajLevel</code>. By default the function will plot the
trajectory frequencies.</p>
<p>For <code>trajLevel</code>, the argument <code>method = "hexbin"</code> can be used. In
this case hexagonal binning of the trajectory <em>points</em> (i.e. a point
every three hours along each back trajectory). The plot then shows the
trajectory frequencies uses hexagonal binning. This is an alternative way
of viewing trajectory frequencies compared with <code>statistic =
  "frequency"</code>.</p>
<p>There are also various ways of plotting concentrations.</p>
<p>It is also possible to set <code>statistic = "difference"</code>. In this case
trajectories where the associated concentration is greater than
<code>percentile</code> are compared with the the full set of trajectories to
understand the differences in frequencies of the origin of air masses. The
comparison is made by comparing the percentage change in gridded
frequencies. For example, such a plot could show that the top 10\<!-- % of -->
concentrations of PM10 tend to originate from air-mass origins to the east.</p>
<p>If <code>statistic = "pscf"</code> then a Potential Source Contribution Function
map is produced. If <code>statistic = "cwt"</code> then concentration weighted
trajectories are plotted.</p>
<p>If <code>statistic = "cwt"</code> then the Concentration Weighted Trajectory
approach is used. See details.</p></dd>


<dt>percentile</dt>
<dd><p>For <code>trajLevel</code>. The percentile concentration of
<code>pollutant</code> against which the all trajectories are compared.</p></dd>


<dt>lon.inc</dt>
<dd><p>The longitude-interval to be used for binning data for
<code>trajLevel</code>.</p></dd>


<dt>lat.inc</dt>
<dd><p>The latitude-interval to be used for binning data when
<code>trajLevel</code>.</p></dd>


<dt>min.bin</dt>
<dd><p>For <code>trajLevel</code> the minimum number of unique points in a
grid cell. Counts below <code>min.bin</code> are set as missing. For
<code>trajLevel</code> gridded outputs.</p></dd>


<dt>cols</dt>
<dd><p>Colours to be used for plotting. Options include "default",
"increment", "heat", "turbo" and <code>RColorBrewer</code> colours — see the
<code><a href="https://davidcarslaw.github.io/openair/reference/openColours.html" class="external-link">openair::openColours()</a></code> function for more details. For user defined the
user can supply a list of colour names recognised by R (type
<code><a href="https://rdrr.io/r/grDevices/colors.html" class="external-link">grDevices::colours()</a></code> to see the full list). An example would be <code>cols = c("yellow", "green", "blue")</code>.</p></dd>


<dt>alpha</dt>
<dd><p>Opacity of the tiles. Must be between <code>0</code> and <code>1</code>.</p></dd>


<dt>tile.border</dt>
<dd><p>Colour to use for the border of binned tiles. Defaults to
<code>NA</code>, which draws no border.</p></dd>


<dt>provider</dt>
<dd><p>The base map to be used. See
<a href="http://leaflet-extras.github.io/leaflet-providers/preview/" class="external-link">http://leaflet-extras.github.io/leaflet-providers/preview/</a> for a list of
all base maps that can be used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A leaflet object.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other trajectory maps: 
<code><a href="trajMap.html">trajMap</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">trajLevelMap</span><span class="op">(</span><span class="va">traj_data</span>, pollutant <span class="op">=</span> <span class="st">"pm2.5"</span>, statistic <span class="op">=</span> <span class="st">"pscf"</span>, min.bin <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jack Davison, David Carslaw.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

