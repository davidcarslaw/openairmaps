<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="windroseMap() creates a leaflet map using wind roses as markers. Multiple
layers of markers can be added and toggled between using control."><title>Wind rose plots on interactive leaflet maps — windroseMap • openairmaps</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Wind rose plots on interactive leaflet maps — windroseMap"><meta property="og:description" content="windroseMap() creates a leaflet map using wind roses as markers. Multiple
layers of markers can be added and toggled between using control."><meta property="og:image" content="https://davidcarslaw.github.io/openairmaps/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">openairmaps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0.9002</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://bookdown.org/david_carslaw/openair/maps-overview.html">Book (External)</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Wind rose plots on interactive leaflet maps</h1>
      
      <div class="d-none name"><code>windroseMap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>windroseMap()</code> creates a <code>leaflet</code> map using wind roses as markers. Multiple
layers of markers can be added and toggled between using <code>control</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">windroseMap</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  ws.int <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  latitude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  longitude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  control <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  popup <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"OpenStreetMap"</span>,</span>
<span>  cols <span class="op">=</span> <span class="st">"turbo"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  key <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  draw.legend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  collapse.control <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  d.icon <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  d.fig <span class="op">=</span> <span class="fl">3.5</span>,</span>
<span>  type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data frame. The data frame must contain the data to plot a
<code><a href="https://davidcarslaw.github.io/openair/reference/windRose.html" class="external-link">openair::windRose()</a></code>, which includes wind speed (<code>ws</code>), and wind direction
(<code>wd</code>). In addition, <code>data</code> must include a decimal latitude and longitude.</p></dd>


<dt>ws.int</dt>
<dd><p>The wind speed interval. Default is 2 m/s but for low met masts
with low mean wind speeds a value of 1 or 0.5 m/s may be better.</p></dd>


<dt>breaks</dt>
<dd><p>Most commonly, the number of break points for wind speed in
windRose. For windRose and the ws.int default of 2 m/s, the default, 4,
generates the break points 2, 4, 6, 8 m/s. Breaks can also be used to set
specific break points. For example, the argument breaks = c(0, 1, 10, 100)
breaks the data into segments &lt;1, 1-10, 10-100, &gt;100.</p></dd>


<dt>latitude, longitude</dt>
<dd><p>The decimal latitude/longitude. If not provided,
will be automatically inferred from data by looking for a column named
"lat"/"latitude" or "lon"/"lng"/"long"/"longitude" (case-insensitively).</p></dd>


<dt>control</dt>
<dd><p>Column to be used for splitting the input data into different
groups which can be selected between using a "layer control" interface.
Appropriate columns could be those added by <code><a href="https://davidcarslaw.github.io/openair/reference/cutData.html" class="external-link">openair::cutData()</a></code> or
<code><a href="https://davidcarslaw.github.io/openair/reference/splitByDate.html" class="external-link">openair::splitByDate()</a></code>. <code>control</code> cannot be used if multiple <code>pollutant</code>
columns have been provided.</p></dd>


<dt>popup</dt>
<dd><p>Column to be used as the HTML content for marker popups. Popups
may be useful to show information about the individual sites (e.g., site
names, codes, types, etc.).</p></dd>


<dt>label</dt>
<dd><p>Column to be used as the HTML content for hover-over labels.
Labels are useful for the same reasons as popups, though are typically
shorter.</p></dd>


<dt>provider</dt>
<dd><p>The base map(s) to be used. See
<a href="http://leaflet-extras.github.io/leaflet-providers/preview/" class="external-link">http://leaflet-extras.github.io/leaflet-providers/preview/</a> for a list of
all base maps that can be used. If multiple base maps are provided, they
can be toggled between using a "layer control" interface.</p></dd>


<dt>cols</dt>
<dd><p>The colours used for plotting. See <code><a href="https://davidcarslaw.github.io/openair/reference/openColours.html" class="external-link">openair::openColours()</a></code> for
more information.</p></dd>


<dt>alpha</dt>
<dd><p>The alpha transparency to use for the plotting surface (a value
between 0 and 1 with zero being fully transparent and 1 fully opaque).</p></dd>


<dt>key</dt>
<dd><p>Should a key for each marker be drawn? Default is <code>FALSE</code>.</p></dd>


<dt>draw.legend</dt>
<dd><p>Should a shared legend be created at the side of the map?
Default is <code>TRUE</code>.</p></dd>


<dt>collapse.control</dt>
<dd><p>Should the "layer control" interface be collapsed?
Defaults to <code>FALSE</code>.</p></dd>


<dt>d.icon</dt>
<dd><p>The diameter of the plot on the map in pixels. This will affect
the size of the individual polar markers. Alternatively, a vector in the
form <code>c(width, height)</code> can be provided if a non-circular marker is
desired.</p></dd>


<dt>d.fig</dt>
<dd><p>The diameter of the plots to be produced using <code>openair</code> in
inches. This will affect the resolution of the markers on the map.
Alternatively, a vector in the form <code>c(width, height)</code> can be provided if a
non-circular marker is desired.</p></dd>


<dt>type</dt>
<dd><p>Deprecated. Please use <code>label</code> and/or <code>popup</code> to label different
sites.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="https://davidcarslaw.github.io/openair/reference/windRose.html" class="external-link">openair::windRose</a></code></p><dl><dt><code>ws</code></dt>
<dd><p>Name of the column representing wind speed.</p></dd>

    <dt><code>wd</code></dt>
<dd><p>Name of the column representing wind direction.</p></dd>

    <dt><code>ws2,wd2</code></dt>
<dd><p>The user can supply a second set of wind speed and wind
direction values with which the first can be compared. See
<code><a href="https://davidcarslaw.github.io/openair/reference/pollutionRose.html" class="external-link">pollutionRose()</a></code> for more details.</p></dd>

    <dt><code>angle</code></dt>
<dd><p>Default angle of “spokes” is 30. Other potentially useful
angles are 45 and 10. Note that the width of the wind speed interval may
need adjusting using <code>width</code>.</p></dd>

    <dt><code>bias.corr</code></dt>
<dd><p>When <code>angle</code> does not divide exactly into 360 a bias is
introduced in the frequencies when the wind direction is already supplied
rounded to the nearest 10 degrees, as is often the case. For example, if
<code>angle = 22.5</code>, N, E, S, W will include 3 wind sectors and all other
angles will be two. A bias correction can made to correct for this problem.
A simple method according to Applequist (2012) is used to adjust the
frequencies.</p></dd>

    <dt><code>grid.line</code></dt>
<dd><p>Grid line interval to use. If <code>NULL</code>, as in default,
this is assigned based on the available data range. However, it can also be
forced to a specific value, e.g. <code>grid.line = 10</code>. <code>grid.line</code>
can also be a list to control the interval, line type and colour. For
example <code>grid.line = list(value = 10, lty = 5, col = "purple")</code>.</p></dd>

    <dt><code>width</code></dt>
<dd><p>For <code>paddle = TRUE</code>, the adjustment factor for width of
wind speed intervals. For example, <code>width = 1.5</code> will make the paddle
width 1.5 times wider.</p></dd>

    <dt><code>seg</code></dt>
<dd><p>When <code>paddle = TRUE</code>, <code>seg</code> determines with width of the
segments. For example, <code>seg = 0.5</code> will produce segments 0.5 *
<code>angle</code>.</p></dd>

    <dt><code>auto.text</code></dt>
<dd><p>Either <code>TRUE</code> (default) or <code>FALSE</code>. If <code>TRUE</code>
titles and axis labels will automatically try and format pollutant names
and units properly, e.g., by subscripting the ‘2’ in NO2.</p></dd>

    <dt><code>offset</code></dt>
<dd><p>The size of the 'hole' in the middle of the plot, expressed as
a percentage of the polar axis scale, default 10.</p></dd>

    <dt><code>normalise</code></dt>
<dd><p>If <code>TRUE</code> each wind direction segment is normalised to
equal one. This is useful for showing how the concentrations (or other
parameters) contribute to each wind sector when the proportion of time the
wind is from that direction is low. A line showing the probability that the
wind directions is from a particular wind sector is also shown.</p></dd>

    <dt><code>max.freq</code></dt>
<dd><p>Controls the scaling used by setting the maximum value for
the radial limits. This is useful to ensure several plots use the same
radial limits.</p></dd>

    <dt><code>paddle</code></dt>
<dd><p>Either <code>TRUE</code> or <code>FALSE</code>. If <code>TRUE</code> plots rose
using 'paddle' style spokes. If <code>FALSE</code> plots rose using 'wedge' style
spokes.</p></dd>

    <dt><code>key.header</code></dt>
<dd><p>Adds additional text/labels above the scale key. For
example, passing <code>windRose(mydata, key.header = "ws")</code> adds the
addition text as a scale header. Note: This argument is passed to
<code><a href="https://davidcarslaw.github.io/openair/reference/drawOpenKey.html" class="external-link">drawOpenKey()</a></code> via <code><a href="https://davidcarslaw.github.io/openair/reference/quickText.html" class="external-link">quickText()</a></code>, applying the auto.text argument, to
handle formatting.</p></dd>

    <dt><code>key.footer</code></dt>
<dd><p>Adds additional text/labels below the scale key. See
<code>key.header</code> for further information.</p></dd>

    <dt><code>key.position</code></dt>
<dd><p>Location where the scale key is to plotted. Allowed
arguments currently include “top”, “right”, “bottom”
and “left”.</p></dd>

    <dt><code>dig.lab</code></dt>
<dd><p>The number of significant figures at which scientific number
formatting is used in break point and key labelling. Default 5.</p></dd>

    <dt><code>include.lowest</code></dt>
<dd><p>Logical. If <code>FALSE</code> (the default), the first
interval will be left exclusive and right inclusive. If <code>TRUE</code>, the
first interval will be left and right inclusive. Passed to the
<code>include.lowest</code> argument of <code><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut()</a></code>.</p></dd>

    <dt><code>statistic</code></dt>
<dd><p>The <code>statistic</code> to be applied to each data bin in the
plot. Options currently include “prop.count”, “prop.mean” and
“abs.count”. The default “prop.count” sizes bins according to
the proportion of the frequency of measurements.  Similarly,
“prop.mean” sizes bins according to their relative contribution to
the mean. “abs.count” provides the absolute count of measurements in
each bin.</p></dd>

    <dt><code>pollutant</code></dt>
<dd><p>Alternative data series to be sampled instead of wind speed.
The <code><a href="https://davidcarslaw.github.io/openair/reference/windRose.html" class="external-link">windRose()</a></code> default NULL is equivalent to <code>pollutant = "ws"</code>. Use
in <code><a href="https://davidcarslaw.github.io/openair/reference/pollutionRose.html" class="external-link">pollutionRose()</a></code>.</p></dd>

    <dt><code>angle.scale</code></dt>
<dd><p>The scale is by default shown at a 315 degree angle.
Sometimes the placement of the scale may interfere with an interesting
feature. The user can therefore set <code>angle.scale</code> to another value
(between 0 and 360 degrees) to mitigate such problems. For example
<code>angle.scale = 45</code> will draw the scale heading in a NE direction.</p></dd>

    <dt><code>border</code></dt>
<dd><p>Border colour for shaded areas. Default is no border.</p></dd>

  
</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A leaflet object.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>the original <code><a href="https://davidcarslaw.github.io/openair/reference/windRose.html" class="external-link">openair::windRose()</a></code></p>
<p><code><a href="windroseMapStatic.html">windroseMapStatic()</a></code> for the static <code>ggmap</code> equivalent of
<code>windroseMap()</code></p>
<p>Other interactive directional analysis maps: 
<code><a href="annulusMap.html">annulusMap</a>()</code>,
<code><a href="diffMap.html">diffMap</a>()</code>,
<code><a href="freqMap.html">freqMap</a>()</code>,
<code><a href="percentileMap.html">percentileMap</a>()</code>,
<code><a href="polarMap.html">polarMap</a>()</code>,
<code><a href="pollroseMap.html">pollroseMap</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">windroseMap</span><span class="op">(</span><span class="va">polar_data</span>,</span></span>
<span class="r-in"><span>  provider <span class="op">=</span> <span class="st">"Stamen.Toner"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jack Davison, David Carslaw.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

